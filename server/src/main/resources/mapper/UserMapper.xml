<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.hitek.authorization.ilis2.product.base.mapper.UserMapper">

    <select id="getUserRole" parameterType="String" resultType="String">
        select r.role_name
        from t_s_user u
                 left join t_s_user_role ur on u.id = ur.user_id
                 left join t_s_role r on ur.role_id = r.id
        where u.id = #{userId}
    </select>

    <select id="getUserPermission" parameterType="String" resultType="cn.hitek.authorization.ilis2.product.base.domain.Permission">
        select p.authority, p.`desc` from t_s_permission p
                          left join t_s_role_permission rp on rp.permission_id = p.id
                          left join t_s_user_role ur on rp.role_id = ur.role_id
                          left join t_s_user u on ur.user_id = u.id
        where u.id = #{userId}
    </select>
</mapper>
